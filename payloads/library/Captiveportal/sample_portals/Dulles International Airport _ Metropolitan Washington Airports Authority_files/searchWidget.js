function buildDeparturesEngine(){$("#flight-search .searchbox .typeahead").typeahead("destroy");var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("keywords"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:flightRecordsDepartures});a.initialize(),$("#flight-search .searchbox .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"keywords",display:"shortcode",source:a,templates:{empty:Handlebars.compile($("#empty-template").html()),suggestion:Handlebars.compile($("#result-template").html()),footer:Handlebars.compile($("#footer-template").html())}})}function buildArrivalsEngine(){$("#flight-search .searchbox .typeahead").typeahead("destroy");var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("keywords"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:flightRecordsArrivals});$("#flight-search .searchbox .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"states",display:"shortcode",source:a,templates:{empty:Handlebars.compile($("#empty-template").html()),suggestion:Handlebars.compile($("#arrivals-template").html()),footer:Handlebars.compile($("#footer-template").html())}})}function loadDetailsPage(a,b,c,d,e,f,g,h){var i=moment(h).format("YYYY"),j=moment(h).format("M"),k=moment(h).format("D");window.location.href="searchPage.html?airport="+airport+"&IATA="+a+"&flightnumber="+b+"&gate="+c+"&direction="+localDirection+"&status="+g+"&year="+i+"&month="+j+"&date="+k}function timer(){var a,b=0,c=$("#inputBlock1").val();c=c.toUpperCase(),$(".arvl-tab").hasClass("active")?a=flightRecordsArrivals:$(".dprt-tab").hasClass("active")&&(a=flightRecordsDepartures);for(var d=0;d<a.length;d++){var e=a[d].airline.toUpperCase(),f=a[d].city.toUpperCase(),g=a[d].flightnumber.toUpperCase(),h=a[d].gate.toUpperCase(),i=a[d].IATA;if(i&&(0==e.indexOf(c)||0==f.indexOf(c)||0==i.indexOf(c)||0==g.indexOf(c)||0==h.indexOf(c))&&(b+=1),b>5){$("#foorterButton").show();break}}5>=b&&$("#foorterButton").hide()}function viewAllSearchResults(){var a=$("#inputBlock1").val();window.location.href="flightSchedule.html?input="+a+"&direction="+localDirection}function NoFlightsViewAllSearchResults(){window.location.href="flightSchedule.html?direction="+localDirection}var S3Bucket="prod-ws1",pageUrl=document.URL,flightRecordsArrivals=new Array,flightRecordsDepartures=new Array,localDirection="departures";if(pageUrl.indexOf("DCA")>=0||pageUrl.indexOf("dca")>=0||pageUrl.indexOf("Dca")>=0||pageUrl.indexOf("flyreagan")>=0)var airport="DCA",departuresData1="//s3.amazonaws.com/"+S3Bucket+"/DCAflightRecordsDepartures.json",arrivalsData1="//s3.amazonaws.com/"+S3Bucket+"/DCAflightRecordsArrivals.json";else var airport="IAD",departuresData1="//s3.amazonaws.com/"+S3Bucket+"/IADflightRecordsDepartures.json",arrivalsData1="//s3.amazonaws.com/"+S3Bucket+"/IADflightRecordsArrivals.json";$(document).ready(function(){$.ajax({type:"GET",url:departuresData1,dataType:"json",crossDomain:!0,success:function(a){results=a;for(var b=0;b<results.length;b++)flightRecordsDepartures.push(results[b]);buildDeparturesEngine()}}),$.ajax({type:"GET",url:arrivalsData1,dataType:"json",crossDomain:!0,success:function(a){results=a;for(var b=0;b<results.length;b++)flightRecordsArrivals.push(results[b]);buildDeparturesEngine()}}),$(".arvl-tab").click(function(){$(".arvl-tab").addClass("active"),$(".dprt-tab").removeClass("active"),localDirection="arrivals",buildArrivalsEngine(),$(".typeahead").val("")}),$(".dprt-tab").click(function(){$(".arvl-tab").removeClass("active"),$(".dprt-tab").addClass("active"),localDirection="departures",buildDeparturesEngine(),$(".typeahead").val("")})});